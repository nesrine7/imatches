import 'dart:convert';

import 'package:flutter/material.dart';
import 'package:i_matches/Screens/Manager/match_service.dart';
import 'dart:io';
import 'package:http/http.dart' as http;
import 'package:i_matches/Screens/Manager/model_manager.dart';
import 'package:i_matches/Route/routes.dart' as route;

class RenameDialog2 extends StatefulWidget {
  final String? title;

   RenameDialog2({Key? key,this.title}): super();
  @override
  _RenameDialog2State createState() => _RenameDialog2State();
}

class _RenameDialog2State extends State<RenameDialog2> {



  late TextEditingController newName;
  final _formKey=GlobalKey<FormState>();
  late String newname;
  Future<String> rename(String name)async{
    name=newName.text;
    String token = await MatchService().getTokenFromSF();
    String club = await MatchService().getClubFromSF();

    final body={
        "title":name,
      "thumbnailUrl": " --  ",
      "videoUrl":"",
      "original":"",
      "fileName": "Whole video - 0-10min.mp4",
      "fileType": "video/mp4",
      "fileSize": 107116238,
      "matchOffset": -29.8,
      "duration": 600,
      "timeSpentCompressing": 63876776413,
      "totalTimeSpent": 77344238411,
      "status":"uploading",
      "logs": {
        "thumbnail": "ffmpeg version 3.2.15 Copyright (c) 2000-2020 the FFmpeg developers\n  built with gcc 6.4.0 (Alpine 6.4.0)\n  configuration: --disable-debug --disable-doc --disable-ffplay --enable-shared --enable-avresample --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-gpl --enable-libass --enable-fontconfig --enable-libfreetype --enable-libvidstab --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libxcb --enable-libx265 --enable-libxvid --enable-libx264 --enable-nonfree --enable-openssl --enable-libfdk_aac --enable-postproc --enable-small --enable-version3 --enable-libbluray --enable-libzmq --extra-libs=-ldl --prefix=/opt/ffmpeg --enable-libopenjpeg --enable-libkvazaar --extra-cflags=-I/opt/ffmpeg/include --extra-ldflags=-L/opt/ffmpeg/lib\n  libavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/fdd081c40abeffae4a3217a7fe4acf96-034525709':\n  Metadata:\n    major_brand     : mp42\n    minor_version   : 0\n    compatible_brands: mp41isom\n    creation_time   : 2021-08-03T12:51:36.000000Z\n  Duration: 00:10:00.09, start: 0.000000, bitrate: 1428 kb/s\n    Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p, 854x480 [SAR 1:1 DAR 427:240], 1229 kb/s, 30 fps, 30 tbr, 30k tbn, 60 tbc (default)\n    Metadata:\n      creation_time   : 2021-08-03T13:20:50.000000Z\n      handler_name    : VideoHandler\n      encoder         : AVC Coding\n    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 196 kb/s (default)\n    Metadata:\n      creation_time   : 2021-08-03T13:20:50.000000Z\n      handler_name    : SoundHandler\n[swscaler @ 0x5595da2b7dc0] deprecated pixel format used, make sure you did set range correctly\nOutput #0, image2, to '/tmpfdd081c40abeffae4a3217a7fe4acf96.jpeg':\n  Metadata:\n    major_brand     : mp42\n    minor_version   : 0\n    compatible_brands: mp41isom\n    encoder         : Lavf57.56.101\n    Stream #0:0: Video: mjpeg, yuvj420p(pc), 854x480 [SAR 1:1 DAR 427:240], q=2-31, 200 kb/s, 30 fps, 30 tbn, 30 tbc (default)\n    Metadata:\n      encoder         : Lavc57.64.101 mjpeg\n    Side data:\n      cpb: bitrate max/min/avg: 0/0/200000 buffer size: 0 vbv_delay: -1\nStream mapping:\n  Stream #0:0 (h264) -> select\n  select -> Stream #0:0 (mjpeg)\nPress [q] to stop, [?] for help\nframe=    1 fps=0.0 q=6.8 Lsize=N/A time=00:00:00.03 bitrate=N/A dup=1 drop=1 speed=0.778x    \nvideo:35kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\n",
        "video": "ffmpeg version 3.2.15 Copyright (c) 2000-2020 the FFmpeg developers\n  built with gcc 6.4.0 (Alpine 6.4.0)\n  configuration: --disable-debug --disable-doc --disable-ffplay --enable-shared --enable-avresample --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-gpl --enable-libass --enable-fontconfig --enable-libfreetype --enable-libvidstab --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libxcb --enable-libx265 --enable-libxvid --enable-libx264 --enable-nonfree --enable-openssl --enable-libfdk_aac --enable-postproc --enable-small --enable-version3 --enable-libbluray --enable-libzmq --extra-libs=-ldl --prefix=/opt/ffmpeg --enable-libopenjpeg --enable-libkvazaar --extra-cflags=-I/opt/ffmpeg/include --extra-ldflags=-L/opt/ffmpeg/lib\n  libavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/fdd081c40abeffae4a3217a7fe4acf96-034525709':\n  Metadata:\n    major_brand     : mp42\n    minor_version   : 0\n    compatible_brands: mp41isom\n    creation_time   : 2021-08-03T12:51:36.000000Z\n  Duration: 00:10:00.09, start: 0.000000, bitrate: 1428 kb/s\n    Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p, 854x480 [SAR 1:1 DAR 427:240], 1229 kb/s, 30 fps, 30 tbr, 30k tbn, 60 tbc (default)\n    Metadata:\n      creation_time   : 2021-08-03T13:20:50.000000Z\n      handler_name    : VideoHandler\n      encoder         : AVC Coding\n    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 196 kb/s (default)\n    Metadata:\n      creation_time   : 2021-08-03T13:20:50.000000Z\n      handler_name    : SoundHandler\n[libx264 @ 0x55ec1621aa00] using SAR=1/1\n[libx264 @ 0x55ec1621aa00] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX FMA3 AVX2 LZCNT BMI2\n[libx264 @ 0x55ec1621aa00] profile High, level 3.0\n[libx264 @ 0x55ec1621aa00] 264 - core 148 - H.264/MPEG-4 AVC codec - Copyleft 2003-2016 - http://www.videolan.org/x264.html - options: cabac=1 ref=1 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=2 psy=1 psy_rd=1.00:0.00 mixed_ref=0 me_range=16 chroma_me=1 trellis=0 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=0 threads=6 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=24 scenecut=40 intra_refresh=0 rc_lookahead=10 rc=crf mbtree=1 crf=25.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/fdd081c40abeffae4a3217a7fe4acf96-034525709.output.mp4':\n  Metadata:\n    major_brand     : mp42\n    minor_version   : 0\n    compatible_brands: mp41isom\n    encoder         : Lavf57.56.101\n    Stream #0:0(und): Video: h264 (libx264) ([33][0][0][0] / 0x0021), yuv420p, 854x480 [SAR 1:1 DAR 427:240], q=-1--1, 24 fps, 12288 tbn, 24 tbc (default)\n    Metadata:\n      creation_time   : 2021-08-03T13:20:50.000000Z\n      handler_name    : VideoHandler\n      encoder         : Lavc57.64.101 libx264\n    Side data:\n      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: -1\n    Stream #0:1(und): Audio: aac ([64][0][0][0] / 0x0040), 48000 Hz, stereo, fltp, 128 kb/s (default)\n    Metadata:\n      creation_time   : 2021-08-03T13:20:50.000000Z\n      handler_name    : SoundHandler\n      encoder         : Lavc57.64.101 aac\nStream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n  Stream #0:1 -> #0:1 (aac (native) -> aac (native))\nPress [q] to stop, [?] for help\nPast duration 0.799995 too large\nframe=  107 fps=0.0 q=30.0 size=     296kB time=00:00:04.43 bitrate= 547.2kbits/s dup=0 drop=25 speed=8.87x    \rframe=  245 fps=244 q=30.0 size=     614kB time=00:00:09.87 bitrate= 509.0kbits/s dup=0 drop=59 speed=9.85x    \rframe=  411 fps=273 q=30.0 size=     983kB time=00:00:16.91 bitrate= 476.1kbits/s dup=0 drop=101 speed=11.3x    \rframe=  552 fps=276 q=30.0 size=    1308kB time=00:00:22.82 bitrate= 469.3kbits/s dup=0 drop=136 speed=11.4x    \rframe=  685 fps=273 q=30.0 size=    1625kB time=00:00:28.43 bitrate= 468.0kbits/s dup=0 drop=169 speed=11.3x    \rframe=  786 fps=261 q=30.0 size=    2048kB time=00:00:32.59 bitrate= 514.7kbits/s dup=0 drop=194 speed=10.8x    \rframe=  892 fps=254 q=30.0 size=    2537kB time=00:00:37.07 bitrate= 560.6kbits/s dup=0 drop=221 speed=10.6x    \rframe= 1011 fps=252 q=30.0 size=    2857kB time=00:00:41.87 bitrate= 558.9kbits/s dup=0 drop=251 speed=10.4x    \rframe= 1134 fps=251 q=30.0 size=    3189kB time=00:00:46.99 bitrate= 555.8kbits/s dup=0 drop=281 speed=10.4x    \rframe= 1242 fps=247 q=30.0 size=    3626kB time=00:00:51.47 bitrate= 577.0kbits/s dup=0 drop=308 speed=10.3x    \rframe= 1342 fps=243 q=30.0 size=    3925kB time=00:00:55.93 bitrate= 574.8kbits/s dup=0 drop=333 speed=10.1x    \rframe= 1458 fps=242 q=30.0 size=    4241kB time=00:01:00.69 bitrate= 572.4kbits/s dup=0 drop=362 speed=10.1x    \rframe= 1572 fps=241 q=30.0 size=    4645kB time=00:01:05.23 bitrate= 583.2kbits/s dup=0 drop=391 speed=  10x    \rframe= 1673 fps=238 q=30.0 size=    4983kB time=00:01:09.44 bitrate= 587.8kbits/s dup=0 drop=416 speed=9.88x    \rframe= 1794 fps=238 q=30.0 size=    5419kB time=00:01:14.51 bitrate= 595.7kbits/s dup=0 drop=446 speed= 9.9x    \rframe= 1918 fps=239 q=30.0 size=    5781kB time=00:01:19.63 bitrate= 594.6kbits/s dup=0 drop=477 speed=9.91x    \rframe= 2034 fps=238 q=30.0 size=    6119kB time=00:01:24.71 bitrate= 591.7kbits/s dup=0 drop=506 speed=9.92x    \rframe= 2156 fps=239 q=30.0 size=    6492kB time=00:01:29.55 bitrate= 593.8kbits/s dup=0 drop=537 speed=9.91x    \rframe= 2272 fps=238 q=30.0 size=    6807kB time=00:01:34.37 bitrate= 590.8kbits/s dup=0 drop=566 speed=9.89x    \rframe= 2393 fps=238 q=30.0 size=    7198kB time=00:01:39.47 bitrate= 592.7kbits/s dup=0 drop=596 speed= 9.9x    \rframe= 2502 fps=237 q=30.0 size=    7558kB time=00:01:44.25 bitrate= 593.9kbits/s dup=0 drop=623 speed=9.88x    \rframe= 2625 fps=237 q=30.0 size=    7862kB time=00:01:49.07 bitrate= 590.5kbits/s dup=0 drop=654 speed=9.87x    \rframe= 2740 fps=237 q=30.0 size=    8198kB time=00:01:53.87 bitrate= 589.8kbits/s dup=0 drop=683 speed=9.85x    \rframe= 2848 fps=236 q=30.0 size=    8534kB time=00:01:58.48 bitrate= 590.0kbits/s dup=0 drop=710 speed=9.83x    \rframe= 2954 fps=235 q=30.0 size=    8932kB time=00:02:02.83 bitrate= 595.7kbits/s dup=0 drop=736 speed=9.78x    \rframe= 3062 fps=234 q=30.0 size=    9358kB time=00:02:07.31 bitrate= 602.1kbits/s dup=0 drop=763 speed=9.74x    \rframe= 3174 fps=234 q=30.0 size=    9791kB time=00:02:12.11 bitrate= 607.1kbits/s dup=0 drop=791 speed=9.73x    \rframe= 3280 fps=233 q=30.0 size=   10167kB time=00:02:16.59 bitrate= 609.7kbits/s dup=0 drop=818 speed=9.71x    \rframe= 3386 fps=232 q=30.0 size=   10509kB time=00:02:20.84 bitrate= 611.2kbits/s dup=0 drop=844 speed=9.66x    \rframe= 3501 fps=232 q=30.0 size=   10870kB time=00:02:25.57 bitrate= 611.7kbits/s dup=0 drop=873 speed=9.66x    \rframe= 3608 fps=232 q=30.0 size=   11193kB time=00:02:30.03 bitrate= 611.1kbits/s dup=0 drop=900 speed=9.63x    \rframe= 3716 fps=231 q=30.0 size=   11513kB time=00:02:34.81 bitrate= 609.2kbits/s dup=0 drop=927 speed=9.63x    \rframe= 3823 fps=230 q=30.0 size=   11861kB time=00:02:39.01 bitrate= 611.0kbits/s dup=0 drop=954 speed=9.59x    \rframe= 3937 fps=230 q=30.0 size=   12199kB time=00:02:43.75 bitrate= 610.3kbits/s dup=0 drop=982 speed=9.58x    \rframe= 4038 fps=229 q=30.0 size=   12525kB time=00:02:48.10 bitrate= 610.4kbits/s dup=0 drop=1007 speed=9.55x    \rframe= 4114 fps=227 q=30.0 size=   12774kB time=00:02:51.39 bitrate= 610.5kbits/s dup=0 drop=1026 speed=9.47x    \rframe= 4221 fps=227 q=30.0 size=   13137kB time=00:02:55.59 bitrate= 612.9kbits/s dup=0 drop=1053 speed=9.44x    \rframe= 4322 fps=226 q=30.0 size=   13427kB time=00:02:59.94 bitrate= 611.3kbits/s dup=0 drop=1078 speed=9.42x    \rframe= 4429 fps=226 q=30.0 size=   13696kB time=00:03:04.23 bitrate= 609.0kbits/s dup=0 drop=1105 speed= 9.4x    \rframe= 4537 fps=226 q=30.0 size=   14005kB time=00:03:09.03 bitrate= 606.9kbits/s dup=0 drop=1132 speed= 9.4x    \rframe= 4644 fps=225 q=30.0 size=   14287kB time=00:03:13.40 bitrate= 605.2kbits/s dup=0 drop=1159 speed=9.39x    \rframe= 4744 fps=225 q=30.0 size=   14544kB time=00:03:17.50 bitrate= 603.2kbits/s dup=0 drop=1184 speed=9.36x    \rframe= 4850 fps=224 q=30.0 size=   14816kB time=00:03:21.83 bitrate= 601.3kbits/s dup=0 drop=1210 speed=9.34x    \rframe= 4966 fps=225 q=30.0 size=   15186kB time=00:03:26.72 bitrate= 601.8kbits/s dup=0 drop=1239 speed=9.35x    \rframe= 5074 fps=224 q=30.0 size=   15561kB time=00:03:31.15 bitrate= 603.7kbits/s dup=0 drop=1266 speed=9.34x    \rframe= 5184 fps=224 q=30.0 size=   15924kB time=00:03:35.91 bitrate= 604.2kbits/s dup=0 drop=1294 speed=9.34x    \rframe= 5292 fps=224 q=30.0 size=   16296kB time=00:03:40.39 bitrate= 605.7kbits/s dup=0 drop=1321 speed=9.33x    \rframe= 5409 fps=224 q=30.0 size=   16620kB time=00:03:45.19 bitrate= 604.6kbits/s dup=0 drop=1350 speed=9.34x    \rframe= 5520 fps=224 q=30.0 size=   16939kB time=00:03:49.73 bitrate= 604.0kbits/s dup=0 drop=1378 speed=9.33x    \rframe= 5637 fps=224 q=30.0 size=   17286kB time=00:03:54.79 bitrate= 603.1kbits/s dup=0 drop=1407 speed=9.35x    \rframe= 5758 fps=225 q=30.0 size=   17701kB time=00:03:59.68 bitrate= 605.0kbits/s dup=0 drop=1437 speed=9.36x    \rframe= 5880 fps=225 q=30.0 size=   18039kB time=00:04:04.71 bitrate= 603.9kbits/s dup=0 drop=1468 speed=9.37x    \rframe= 6000 fps=225 q=30.0 size=   18399kB time=00:04:09.83 bitrate= 603.3kbits/s dup=0 drop=1498 speed=9.39x    \rframe= 6111 fps=225 q=30.0 size=   18713kB time=00:04:14.44 bitrate= 602.5kbits/s dup=0 drop=1526 speed=9.38x    \rframe= 6225 fps=225 q=30.0 size=   19070kB time=00:04:19.11 bitrate= 602.9kbits/s dup=0 drop=1554 speed=9.38x    \rframe= 6334 fps=225 q=30.0 size=   19478kB time=00:04:23.83 bitrate= 604.8kbits/s dup=0 drop=1581 speed=9.38x    \rframe= 6442 fps=225 q=30.0 size=   19802kB time=00:04:28.16 bitrate= 604.9kbits/s dup=0 drop=1608 speed=9.37x    \rframe= 6557 fps=225 q=30.0 size=   20106kB time=00:04:32.87 bitrate= 603.6kbits/s dup=0 drop=1637 speed=9.37x    \rframe= 6662 fps=225 q=30.0 size=   20459kB time=00:04:37.35 bitrate= 604.3kbits/s dup=0 drop=1663 speed=9.36x    \rframe= 6771 fps=225 q=30.0 size=   20893kB time=00:04:41.92 bitrate= 607.1kbits/s dup=0 drop=1691 speed=9.35x    \rframe= 6882 fps=225 q=30.0 size=   21228kB time=00:04:46.63 bitrate= 606.7kbits/s dup=0 drop=1718 speed=9.35x    \rframe= 6982 fps=224 q=30.0 size=   21581kB time=00:04:50.79 bitrate= 608.0kbits/s dup=0 drop=1743 speed=9.34x    \rframe= 7094 fps=224 q=30.0 size=   21931kB time=00:04:55.38 bitrate= 608.2kbits/s dup=0 drop=1771 speed=9.34x    \rframe= 7225 fps=225 q=30.0 size=   22268kB time=00:05:00.71 bitrate= 606.6kbits/s dup=0 drop=1804 speed=9.35x    \rframe= 7340 fps=225 q=30.0 size=   22610kB time=00:05:05.51 bitrate= 606.3kbits/s dup=0 drop=1833 speed=9.35x    \rframe= 7447 fps=225 q=30.0 size=   22949kB time=00:05:10.08 bitrate= 606.3kbits/s dup=0 drop=1860 speed=9.35x    \rframe= 7560 fps=225 q=30.0 size=   23356kB time=00:05:14.79 bitrate= 607.8kbits/s dup=0 drop=1888 speed=9.35x    \rframe= 7654 fps=224 q=30.0 size=   23760kB time=00:05:18.63 bitrate= 610.8kbits/s dup=0 drop=1911 speed=9.33x    \rframe= 7778 fps=224 q=30.0 size=   24109kB time=00:05:23.81 bitrate= 609.9kbits/s dup=0 drop=1942 speed=9.34x    \rframe= 7901 fps=225 q=30.0 size=   24458kB time=00:05:28.87 bitrate= 609.2kbits/s dup=0 drop=1973 speed=9.35x    \rframe= 8014 fps=225 q=30.0 size=   24829kB time=00:05:33.67 bitrate= 609.6kbits/s dup=0 drop=2001 speed=9.35x    \rframe= 8115 fps=224 q=30.0 size=   25227kB time=00:05:37.96 bitrate= 611.5kbits/s dup=0 drop=2027 speed=9.34x    \rframe= 8230 fps=224 q=30.0 size=   25552kB time=00:05:42.63 bitrate= 610.9kbits/s dup=0 drop=2055 speed=9.34x    \rframe= 8352 fps=225 q=30.0 size=   25867kB time=00:05:47.75 bitrate= 609.3kbits/s dup=0 drop=2086 speed=9.35x    \rframe= 8446 fps=224 q=30.0 size=   26231kB time=00:05:51.59 bitrate= 611.2kbits/s dup=0 drop=2109 speed=9.33x    \rframe= 8554 fps=224 q=30.0 size=   26595kB time=00:05:56.20 bitrate= 611.6kbits/s dup=0 drop=2136 speed=9.33x    \rframe= 8669 fps=224 q=30.0 size=   27006kB time=00:06:00.93 bitrate= 612.9kbits/s dup=0 drop=2165 speed=9.33x    \rframe= 8786 fps=224 q=30.0 size=   27275kB time=00:06:05.99 bitrate= 610.5kbits/s dup=0 drop=2194 speed=9.34x    \rframe= 8902 fps=224 q=30.0 size=   27541kB time=00:06:10.79 bitrate= 608.5kbits/s dup=0 drop=2223 speed=9.34x    \rframe= 9022 fps=224 q=30.0 size=   27810kB time=00:06:15.91 bitrate= 606.0kbits/s dup=0 drop=2253 speed=9.35x    \rframe= 9150 fps=225 q=30.0 size=   28090kB time=00:06:21.03 bitrate= 603.9kbits/s dup=0 drop=2285 speed=9.36x    \rframe= 9257 fps=225 q=30.0 size=   28463kB time=00:06:25.51 bitrate= 604.8kbits/s dup=0 drop=2312 speed=9.36x    \rframe= 9375 fps=225 q=30.0 size=   28788kB time=00:06:30.40 bitrate= 604.1kbits/s dup=0 drop=2342 speed=9.36x    \rframe= 9482 fps=225 q=30.0 size=   29143kB time=00:06:34.92 bitrate= 604.5kbits/s dup=0 drop=2368 speed=9.36x    \rframe= 9598 fps=225 q=30.0 size=   29450kB time=00:06:39.91 bitrate= 603.3kbits/s dup=0 drop=2397 speed=9.36x    \rframe= 9727 fps=225 q=30.0 size=   29754kB time=00:06:45.03 bitrate= 601.8kbits/s dup=0 drop=2430 speed=9.37x    \rframe= 9866 fps=226 q=30.0 size=   30013kB time=00:06:50.79 bitrate= 598.5kbits/s dup=0 drop=2464 speed= 9.4x    \rframe= 9982 fps=226 q=30.0 size=   30364kB time=00:06:55.68 bitrate= 598.4kbits/s dup=0 drop=2493 speed= 9.4x    \rframe=10101 fps=226 q=30.0 size=   30642kB time=00:07:00.71 bitrate= 596.6kbits/s dup=0 drop=2523 speed=9.41x    \rframe=10220 fps=226 q=30.0 size=   30980kB time=00:07:05.53 bitrate= 596.4kbits/s dup=0 drop=2553 speed=9.41x    \rframe=10335 fps=226 q=30.0 size=   31275kB time=00:07:10.52 bitrate= 595.1kbits/s dup=0 drop=2582 speed=9.42x    \rframe=10458 fps=226 q=30.0 size=   31642kB time=00:07:15.45 bitrate= 595.3kbits/s dup=0 drop=2612 speed=9.42x    \rframe=10581 fps=226 q=30.0 size=   31936kB time=00:07:20.55 bitrate= 593.8kbits/s dup=0 drop=2643 speed=9.43x    \rframe=10693 fps=226 q=30.0 size=   32251kB time=00:07:25.35 bitrate= 593.2kbits/s dup=0 drop=2671 speed=9.43x    \rframe=10814 fps=227 q=30.0 size=   32526kB time=00:07:30.47 bitrate= 591.5kbits/s dup=0 drop=2701 speed=9.44x    \rframe=10911 fps=226 q=30.0 size=   32829kB time=00:07:34.59 bitrate= 591.6kbits/s dup=0 drop=2726 speed=9.43x    \rframe=11025 fps=226 q=30.0 size=   33235kB time=00:07:39.11 bitrate= 593.0kbits/s dup=0 drop=2754 speed=9.42x    \rframe=11141 fps=226 q=30.0 size=   33673kB time=00:07:43.91 bitrate= 594.6kbits/s dup=0 drop=2783 speed=9.42x    \rframe=11246 fps=226 q=30.0 size=   34117kB time=00:07:48.39 bitrate= 596.7kbits/s dup=0 drop=2809 speed=9.42x    \rframe=11357 fps=226 q=30.0 size=   34527kB time=00:07:53.02 bitrate= 598.0kbits/s dup=0 drop=2837 speed=9.42x    \rframe=11464 fps=226 q=30.0 size=   34872kB time=00:07:57.67 bitrate= 598.0kbits/s dup=0 drop=2864 speed=9.41x    \rframe=11585 fps=226 q=30.0 size=   35243kB time=00:08:02.47 bitrate= 598.4kbits/s dup=0 drop=2894 speed=9.42x    \rframe=11699 fps=226 q=30.0 size=   35564kB time=00:08:07.27 bitrate= 597.9kbits/s dup=0 drop=2923 speed=9.42x    \rframe=11814 fps=226 q=30.0 size=   35888kB time=00:08:12.07 bitrate= 597.5kbits/s dup=0 drop=2951 speed=9.42x    \rframe=11928 fps=226 q=30.0 size=   36224kB time=00:08:16.87 bitrate= 597.2kbits/s dup=0 drop=2980 speed=9.42x    \rframe=12040 fps=226 q=30.0 size=   36618kB time=00:08:21.44 bitrate= 598.2kbits/s dup=0 drop=3008 speed=9.41x    \rframe=12163 fps=226 q=30.0 size=   36861kB time=00:08:26.56 bitrate= 596.1kbits/s dup=0 drop=3039 speed=9.42x    \rframe=12294 fps=227 q=30.0 size=   37090kB time=00:08:32.17 bitrate= 593.2kbits/s dup=0 drop=3071 speed=9.44x    \rframe=12401 fps=226 q=30.0 size=   37453kB time=00:08:36.58 bitrate= 593.9kbits/s dup=0 drop=3098 speed=9.43x    \rframe=12512 fps=226 q=30.0 size=   37807kB time=00:08:41.19 bitrate= 594.2kbits/s dup=0 drop=3126 speed=9.43x    \rframe=12622 fps=226 q=30.0 size=   38188kB time=00:08:45.67 bitrate= 595.1kbits/s dup=0 drop=3153 speed=9.43x    \rframe=12731 fps=226 q=30.0 size=   38549kB time=00:08:50.41 bitrate= 595.4kbits/s dup=0 drop=3181 speed=9.43x    \rframe=12846 fps=226 q=30.0 size=   38937kB time=00:08:55.10 bitrate= 596.1kbits/s dup=0 drop=3209 speed=9.43x    \rframe=12961 fps=226 q=30.0 size=   39304kB time=00:08:59.75 bitrate= 596.5kbits/s dup=0 drop=3238 speed=9.42x    \rframe=13077 fps=226 q=30.0 size=   39686kB time=00:09:04.55 bitrate= 597.0kbits/s dup=0 drop=3267 speed=9.42x    \rframe=13196 fps=226 q=30.0 size=   40004kB time=00:09:09.67 bitrate= 596.2kbits/s dup=0 drop=3297 speed=9.43x    \rframe=13315 fps=227 q=30.0 size=   40295kB time=00:09:14.60 bitrate= 595.2kbits/s dup=0 drop=3327 speed=9.43x    \rframe=13421 fps=226 q=30.0 size=   40632kB time=00:09:18.95 bitrate= 595.5kbits/s dup=0 drop=3353 speed=9.43x    \rframe=13530 fps=226 q=30.0 size=   40932kB time=00:09:23.64 bitrate= 594.9kbits/s dup=0 drop=3380 speed=9.43x    \rframe=13629 fps=226 q=30.0 size=   41281kB time=00:09:27.59 bitrate= 595.8kbits/s dup=0 drop=3405 speed=9.41x    \rframe=13730 fps=226 q=30.0 size=   41684kB time=00:09:31.96 bitrate= 597.0kbits/s dup=0 drop=3430 speed=9.41x    \rframe=13853 fps=226 q=30.0 size=   42081kB time=00:09:36.87 bitrate= 597.6kbits/s dup=0 drop=3461 speed=9.41x    \rframe=13960 fps=226 q=30.0 size=   42388kB time=00:09:41.35 bitrate= 597.3kbits/s dup=0 drop=3488 speed=9.41x    \rframe=14058 fps=226 q=30.0 size=   42726kB time=00:09:45.51 bitrate= 597.8kbits/s dup=0 drop=3512 speed= 9.4x    \rframe=14181 fps=226 q=30.0 size=   43032kB time=00:09:50.63 bitrate= 596.8kbits/s dup=0 drop=3543 speed=9.41x    \rframe=14310 fps=226 q=30.0 size=   43423kB time=00:09:56.07 bitrate= 596.8kbits/s dup=0 drop=3575 speed=9.42x    \rframe=14403 fps=226 q=-1.0 Lsize=   44213kB time=00:10:00.08 bitrate= 603.6kbits/s dup=0 drop=3599 speed=9.41x    \nvideo:34307kB audio:9502kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.920772%\n[libx264 @ 0x55ec1621aa00] frame I:63    Avg QP:21.33  size: 27344\n[libx264 @ 0x55ec1621aa00] frame P:4415  Avg QP:24.68  size:  5907\n[libx264 @ 0x55ec1621aa00] frame B:9925  Avg QP:29.88  size:   738\n[libx264 @ 0x55ec1621aa00] consecutive B-frames:  4.5%  7.5% 10.1% 77.9%\n[libx264 @ 0x55ec1621aa00] mb I  I16..4: 18.0% 34.8% 47.2%\n[libx264 @ 0x55ec1621aa00] mb P  I16..4:  6.6%  5.0%  1.1%  P16..4: 30.8% 12.6%  6.8%  0.0%  0.0%    skip:37.1%\n[libx264 @ 0x55ec1621aa00] mb B  I16..4:  0.4%  0.1%  0.0%  B16..8:  7.6%  2.4%  0.5%  direct: 0.9%  skip:88.1%  L0:48.5% L1:38.4% BI:13.1%\n[libx264 @ 0x55ec1621aa00] 8x8 transform intra:37.5% inter:23.0%\n[libx264 @ 0x55ec1621aa00] coded y,uvDC,uvAC intra: 39.2% 43.2% 7.0% inter: 4.9% 3.4% 0.1%\n[libx264 @ 0x55ec1621aa00] i16 v,h,dc,p: 28% 51% 18%  3%\n[libx264 @ 0x55ec1621aa00] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 51% 26%  2%  1%  1%  3%  1%  4%\n[libx264 @ 0x55ec1621aa00] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 26% 35% 16%  3%  3%  4%  4%  4%  5%\n[libx264 @ 0x55ec1621aa00] i8c dc,h,v,p: 53% 31% 13%  3%\n[libx264 @ 0x55ec1621aa00] Weighted P-Frames: Y:5.3% UV:0.4%\n[libx264 @ 0x55ec1621aa00] kb/s:468.30\n[aac @ 0x55ec163b4d60] Qavg: 445.687\n",
        "_id": "61122df8d804f07a2bbfcda6"
      },
      "matchId": "6111aef6b49d264f5c051147",
      "_id": "6111b36780ba289d36055d65",
      "updatedAt": "2022-02-27T16:17:10.479Z",
      "createdAt": "2022-02-27T16:17:10.479Z"
    };
    final response = await http.patch(
      Uri.parse('https://stats.isporit.com/api/videos/?clubId=$club'),
      body: jsonEncode(body),
      headers: {
        "content-Type" : "application/json",
        'accept': 'application/json',
        HttpHeaders.authorizationHeader: '$token'
      },
    );
    if(response.statusCode==200){
      var newname = Video.fromJson(jsonDecode(response.body)).title.toString();
    }
    SnackBar sucess = SnackBar(
      content: Text(" new name updated  "),
      behavior: SnackBarBehavior.floating,
    );
    ScaffoldMessenger.of(context).showSnackBar(sucess);
    Navigator.pushNamed(context, route.match);
    return newname;

  }

  @override
  void initState(){
    newName = TextEditingController(text: widget.title);
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return AlertDialog(
      content:
      Container(
        height: 150,
        width: 400,
        child: Form(
          key: _formKey,
          child: Column(
              children: [
                TextFormField(
                  cursorColor: Colors.lightGreen,
                  decoration: new InputDecoration(
                    labelText:widget.title,
                    labelStyle: TextStyle(color: Colors.lightGreen,fontSize: 30,fontWeight: FontWeight.bold),
                    floatingLabelBehavior: FloatingLabelBehavior.always,

                  ),
                  controller: newName,
                ),
                FlatButton(
                  textColor: Colors.white,
                  onPressed: () {
                     rename(widget.title.toString());
                  },
                  child: Text('RENAME'),
                  color: Colors.lightGreen,
                ),
              ]),
        ),

      ),




    );
  }
}


